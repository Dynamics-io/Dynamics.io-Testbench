#pragma OPENCL EXTENSION __cl_clang_function_pointers : enable
#pragma OPENCL EXTENSION __cl_clang_variadic_functions : enable
#include "opencl_new"
#include "type_traits"
#pragma OPENCL EXTENSION __cl_clang_function_pointers : disable
#pragma OPENCL EXTENSION __cl_clang_variadic_functions : disable

class B{
public:
	B(int num = 24)
	: x(num) {}
	
	int get() {return x;}
private:
	int x;
};

/*void foo(B **b){
	*b = new (buffer) B;
}*/

__kernel void bar(__global int * ptr,
				  __local void* data) {
	int id = get_global_id(0);
	
	B* b = new (data) B(6);
	
	ptr[id] = b->get();
}